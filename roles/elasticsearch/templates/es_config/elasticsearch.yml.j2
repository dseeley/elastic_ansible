#jinja2: trim_blocks:False
{{ ansible_managed | comment }}

{% if cluster_name is not defined %}
cluster.name: elasticsearch
{% else %}
cluster.name: {{ cluster_name }}
{% endif %}

node.name: {{cluster_name}}_{{ansible_hostname}}


## Path to directory where to store the data (separate multiple locations by comma):
path.data: {{ es_data_dir }}

# Path to log files:
path.logs: {{ es_log_dir }}

network.host: {{ es_network_host }}

node.data: {% if 'es-data' in group_names %}true{% else %}false{% endif %}
node.ingest: {% if 'es-data' in group_names %}true{% else %}false{% endif %}
node.ml: {% if 'ml' in group_names %}true{% else %}false{% endif %}

{% if cluster_vars[buildenv].hosttype_vars['es-master'] is undefined %}
node.master: true
{% else %}
node.master: {% if 'es-master' in group_names -%}true{%- else -%}false{% endif %}
{% endif %}

{% if es_extra_config %}
{{ es_extra_config | to_nice_yaml }}
{% endif %}

cluster.initial_master_nodes: {{ initial_master_nodes }}

## Pass an initial list of hosts to perform discovery when new node is started (default list of hosts is ["127.0.0.1", "[::1]"]):
discovery.zen.ping.unicast.hosts: {{ all_hosts_fqdn }}

## Prevent the "split brain" by configuring the majority of nodes (total number of master-eligible nodes / 2 + 1):
#discovery.zen.minimum_master_nodes: 
